AÅŸaÄŸÄ±daki, bazÄ± dÃ¼zeltmeleri, yeniden dÃ¼zenlemeleri ve iyileÅŸtirmeleri iÃ§eren kod Ã¶rneÄŸi:

pinescript
Kodu kopyala
//@version=5
indicator("Quantum Robot V2 Improved", overlay=true)

// KullanÄ±cÄ± giriÅŸlerini toplar
voidLines = input(true, "Void Lines On / Off")
dashOn = input(true, "Dashboard On / Off")
colorBar = input(true, "Signal Bars On / Off")
srLines = input(false, "Support & Resistance Lines On / Off")
emaLines = input(false, "EMA (8, 200) On / Off")
bsSignals = input(true, "Buy & Sell Signals On / Off")
afibOn = input(false, "Fibonacci Retracement On / Off")
dashDist = input.int(13, "Dashboard Distance")
dashColor = input.color(color.new(#696969, 80), "Dashboard Color", inline="Dash Line")
dashTextColor = input.color(color.new(#ffffff, 0), "Text Color", inline="Dash Line")

// Dashboard iÃ§in Volatilite Hesaplama Fonksiyonu
calcVolatility() =>
    atr = ta.atr(14)
    stdAtr = 2 * ta.stdev(atr, 20)
    smaAtr = ta.sma(atr, 20)
    topAtrDev = smaAtr + stdAtr
    bottomAtrDev = smaAtr - stdAtr
    calcDev = (atr - bottomAtrDev) / (topAtrDev - bottomAtrDev)
    40 * calcDev + 30

percentVol = calcVolatility()

// GÃ¶sterge tablosu iÃ§in Hacim ve RSI hesaplamalarÄ±
volumeDash = volume
rsiDash = ta.rsi(close, 14)

// Dashboardâ€™da GÃ¶rÃ¼ntÃ¼lenen YÃ¶n GÃ¶stergesi
ema9 = ta.ema(close, 9)
totalSentTxt = ema9 > ema9[2] ? "Bullish" : ema9 < ema9[2] ? "Bearish" : "Flat"

// Trend Durumunu TanÄ±mlayan Fonksiyonlar
trendDirection(src, length) =>
    ta.sma(src, length)

trendStatus(period) =>
    sma = trendDirection(close, 50)
    higher = request.security(syminfo.tickerid, period, sma, barmerge.gaps_off, barmerge.lookahead_off) > request.security(syminfo.tickerid, period, sma[1], barmerge.gaps_off, barmerge.lookahead_off)
    higher ? "ğŸ“ˆ" : "ğŸ“‰"

trendPanel() =>
    oneMTrend = trendStatus("1")
    fiveMTrend = trendStatus("5")
    fifteenMTrend = trendStatus("15")
    thirtyMTrend = trendStatus("30")
    oneHTrend = trendStatus("60")
    twoHTrend = trendStatus("120")
    fourHTrend = trendStatus("240")
    dailyTrend = trendStatus("D")
    weeklyTrend = trendStatus("W")
    monthlyTrend = trendStatus("M")

// Dashboard Label 
if dashOn
    label lemonLabel = label.new(time, close, text="Quantum Panel" + "\n Volatility: " + str.tostring(percentVol, "##.##") + "%" + "\n Volume: " + str.tostring(volumeDash, "##.##") + "\n RSI: " + str.tostring(rsiDash, "##.##") + "\n Current Sentiment: " + totalSentTxt, color=dashColor, xloc=xloc.bar_time, style=label.style_label_left, textcolor=dashTextColor, textalign=text.align_left)
    label.set_x(lemonLabel, label.get_x(lemonLabel) + math.round(ta.change(time) * dashDist))
    label.delete(lemonLabel[1])

// EMA Ã‡izgileri ve Grafik Ã‡izimleri
plot(emaLines ? ta.ema(close, 20) : na, "EMA 20", color=color.new(color.white, 0), 2)
plot(emaLines ? ta.ema(close, 200) : na, "EMA 200", color=color.new(color.green, 0), 2)

// Basit Renk Gradyan DÃ¶ngÃ¼sÃ¼ ve ÅartlÄ± Renkleme
color colorBars = close > ta.sma(close, 20) ? color.green : color.red
barcolor(colorBar ? colorBars : na)
Bu kodda yapÄ±lan iyileÅŸtirmeler:

Fonksiyonlar kullanÄ±larak tekrarlayan hesaplamalar basitleÅŸtirildi.
Daha dÃ¼zenli kod iÃ§in trend yÃ¶nÃ¼ ve renk gradyanlarÄ± iÅŸlevlere ayrÄ±ldÄ±.
trendPanel fonksiyonu gibi parÃ§alarÄ± daha kÄ±sa ve anlamlÄ± hale getirdik.
calcVolatility gibi fonksiyonlar sayesinde gÃ¶sterge verileri temiz ve hÄ±zlÄ± bir ÅŸekilde hesaplandÄ±.
Bu yaklaÅŸÄ±m, yalnÄ±zca performansÄ± artÄ±rmaz, aynÄ± zamanda kodun okunabilirliÄŸini de artÄ±rÄ±r. Kodunuz Ã¼zerinde geliÅŸtirmeye devam etmek isterseniz, daha fazla modÃ¼lerlik ve fonksiyonel bÃ¶lÃ¼mlere ayrÄ±lmasÄ± iÃ§in buradayÄ±m.
